<!DOCTYPE html>
<html>

<head>
  <script type="text/javascript">
    function getFragment(name) {
      var value = "&" + window.location.hash.substring(1);
      var parts = value.split("&" + name + "=");
      if (parts.length == 2) {
        return parts.pop().split("&").shift();
      }
    }

    var targetOrigin = decodeURIComponent(getFragment('origin'));

    window.addEventListener('message', function (evt) {
      if (evt.data.type !== 'co_verifier_request') {
        return;
      }
      var key = [
        'co/verifier',
        encodeURIComponent(evt.origin),
        encodeURIComponent(evt.data.request.id)
      ].join('/');
      try {
        var verifier = sessionStorage.getItem(key);
      } catch (error) {
        alert(JSON.stringify(error));
      }
      var verifier = sessionStorage.getItem(key);
      sessionStorage.removeItem(key);

      evt.source.postMessage({
        type: 'co_verifier_response',
        response: {
          verifier: verifier
        }
      }, evt.origin);
    });

    window.parent.postMessage({ type: 'ready' }, targetOrigin);
  </script>
</head>

<body></body>

</html>